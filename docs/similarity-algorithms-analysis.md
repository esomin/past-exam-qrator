# 유사도 기반 중복 제거 알고리즘 분석

## 프로젝트 목적
기출문제의 답변옵션에 대해서, 유사도로 필터링 후, 중복을 제거하여, 핵심 답변옵션들로만 데이터를 구성하는 것이 목적입니다.

## 현재 상황
현재 `remove_duplicates.py` 파일은 정확히 일치하는 텍스트에 대해서만 중복제거를 수행하고 있습니다. 유사한 문장들도 중복으로 처리할 수 있는 알고리즘이 필요합니다.

## 제안된 알고리즘 아이디어

### 1. 문자열 유사도 기반 접근법

#### Levenshtein Distance (편집 거리)
```python
# 두 문자열 간의 편집 거리를 계산하여 유사도 판단
# 임계값 설정 (예: 거리가 3 이하면 유사한 것으로 판단)
```

#### Jaccard Similarity (자카드 유사도)
```python
# 단어 집합 간의 교집합/합집합 비율로 유사도 계산
# 예: "안녕하세요 반갑습니다" vs "안녕하세요 만나서 반갑습니다"
```

### 2. 토큰화 기반 접근법

#### N-gram 유사도
```python
# 문장을 n-gram으로 분할하여 유사도 계산
# 예: 2-gram으로 "안녕하세요"를 ["안녕", "녕하", "하세", "세요"]로 분할
```

#### 단어 기반 유사도
```python
# 형태소 분석기(KoNLPy)를 사용하여 단어 단위로 비교
# 불용어 제거 후 핵심 단어들만으로 유사도 계산
```

### 3. 임베딩 기반 접근법

#### TF-IDF + 코사인 유사도
```python
# 문서를 벡터로 변환하여 코사인 유사도 계산
# 의미적으로 유사한 문장들을 효과적으로 찾을 수 있음
```

#### Sentence Transformers
```python
# 사전 훈련된 한국어 문장 임베딩 모델 사용
# 의미적 유사도를 가장 정확하게 측정 가능
```

### 4. 하이브리드 접근법

#### 단계별 필터링
```python
# 1단계: 길이 차이가 큰 문장들 제외
# 2단계: 문자열 유사도로 1차 필터링
# 3단계: 의미적 유사도로 최종 판단
```

#### 규칙 기반 + 머신러닝
```python
# 특정 패턴(숫자, 날짜, 고유명사 등)은 규칙으로 처리
# 나머지는 유사도 알고리즘으로 처리
```

### 5. 성능 최적화 아이디어

#### 클러스터링 접근법
```python
# 유사한 문장들을 클러스터로 그룹화
# 각 클러스터에서 대표 문장 하나만 선택
```

#### 인덱싱 최적화
```python
# 문장 길이나 첫 글자로 사전 필터링
# 모든 쌍을 비교하지 않고 후보군만 비교
```

## 기출문제 답변옵션 특화 추천 알고리즘

### 추천 알고리즘 조합

#### 1. TF-IDF + 코사인 유사도 (1차 추천)
```python
# 기출문제 답변옵션에 최적화된 이유:
# - 짧은 텍스트에서도 효과적
# - 핵심 키워드 중심으로 유사도 계산
# - 빠른 처리 속도
# - 임계값 조정이 용이 (예: 0.8 이상이면 유사)
```

#### 2. 전처리 + 규칙 기반 필터링
```python
# 기출문제 특성에 맞는 전처리:
# - 숫자, 날짜, 단위 정규화 ("2023년" → "YYYY년")
# - 조사, 어미 제거 ("~입니다", "~이다" → 통일)
# - 괄호 내용 처리 ("정답(1번)" → "정답")
# - 공백, 특수문자 정규화
```

#### 3. 단계별 유사도 검증
```python
# 1단계: 길이 기반 사전 필터링 (길이 차이 50% 이상이면 제외)
# 2단계: 키워드 매칭 (핵심 단어 70% 이상 일치)
# 3단계: TF-IDF 코사인 유사도 (0.75 이상)
# 4단계: 편집거리 검증 (최종 확인용)
```

### 기출문제 답변옵션 특화 기능

#### 패턴 기반 그룹핑
```python
# 자주 나타나는 패턴들:
# - "① 정답" vs "1. 정답" vs "정답"
# - "약 50%" vs "50% 정도" vs "대략 50%"
# - "2023년 1월" vs "2023. 1." vs "23년 1월"
```

#### 의미 보존 우선순위
```python
# 중복 제거 시 어떤 것을 남길지 결정:
# 1. 가장 완전한 형태 (정보가 많은 것)
# 2. 가장 표준적인 형태 (공식 용어 사용)
# 3. 가장 짧으면서 명확한 형태
```

#### 도메인별 커스터마이징
```python
# 과목별 특성 반영:
# - 수학: 수식, 기호 처리
# - 국어: 문학 작품명, 작가명
# - 영어: 단어 변형, 문법 패턴
# - 사회: 연도, 지명, 인명
```

### 구현 우선순위 제안

#### Phase 1: 기본 유사도 엔진
- TF-IDF + 코사인 유사도 구현
- 기본 전처리 (공백, 특수문자 정규화)
- 임계값 설정 및 테스트

#### Phase 2: 도메인 특화
- 숫자, 날짜 패턴 정규화
- 조사, 어미 처리
- 괄호, 기호 처리 규칙

#### Phase 3: 성능 최적화
- 길이 기반 사전 필터링
- 클러스터링으로 처리 속도 향상
- 결과 검증 및 품질 개선